// SharpShooter.js
(function($){
Type.registerNamespace('SharpShooter');SharpShooter.Alignment=function(){};SharpShooter.Alignment.prototype = {left:0,right:1,center:2}
SharpShooter.Alignment.registerEnum('SharpShooter.Alignment',false);SharpShooter.KeyCodes=function(){};SharpShooter.KeyCodes.prototype = {backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause_break:19,caps_lock:20,escape:27,space:32,page_up:33,page_down:34,end:35,home:36,left_arrow:37,up_arrow:38,right_arrow:39,down_arrow:40,insert:45,delete_key:46,d0:48,d1:49,d2:50,d3:51,d4:52,d5:53,d6:54,d7:55,d8:56,d9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,left_window_key:91,right_window_key:92,select_key:93,numpad_0:96,numpad_1:97,numpad_2:98,numpad_3:99,numpad_4:100,numpad_5:101,numpad_6:102,numpad_7:103,numpad_8:104,numpad_9:105,multiply:106,add:107,subtract:109,decimal_point:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,num_lock:144,scroll_lock:145,semi_colon:186,equal_sign:187,comma:188,dash:189,period:190,forward_slash:191,grave_accent:192,open_bracket:219,back_slash:220,close_braket:221,single_quote:222}
SharpShooter.KeyCodes.registerEnum('SharpShooter.KeyCodes',false);SharpShooter.ICollideableVisitor=function(){};SharpShooter.ICollideableVisitor.registerInterface('SharpShooter.ICollideableVisitor');SharpShooter.MovementStrategies=function(){}
SharpShooter.MovementStrategies.framed=function(g,ms){g.x=Math.min(Math.max(g.x+g.vx*(ms/1000),0),SharpShooter.Engine.screenWidth-g.width);g.y=Math.min(Math.max(g.y+g.vy*(ms/1000),0),SharpShooter.Engine.screenHeight-g.height);}
SharpShooter.MovementStrategies.continuous=function(g,ms){g.x+=g.vx*(ms/1000);g.y+=g.vy*(ms/1000);if(g.x>SharpShooter.Engine.screenWidth){g.x-=SharpShooter.Engine.screenWidth;}else if(g.x<-g.width){g.x+=SharpShooter.Engine.screenWidth;}if(g.y>SharpShooter.Engine.screenHeight){g.y-=SharpShooter.Engine.screenHeight;}else if(g.y<-g.height){g.y+=SharpShooter.Engine.screenHeight;}}
SharpShooter.MovementStrategies.free=function(g,ms){g.x+=g.vx*(ms/1000);g.y+=g.vy*(ms/1000);}
SharpShooter.NumberDrawer=function(){}
SharpShooter.NumberDrawer.draw=function(ctx,x,y,number,align){ctx.save();ctx.fillStyle='white';var $0=SharpShooter.NumberDrawer.$3(number);switch(align){case 1:ctx.translate(-($0.length*3+$0.length-1)*SharpShooter.NumberDrawer.pixelWidth,0);break;case 2:break;}var $1=0;var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $2=$enum1.current;var $3=SharpShooter.NumberDrawer.$2($2);SharpShooter.NumberDrawer.$1(ctx,x+$1,y,$3);$1+=SharpShooter.NumberDrawer.pixelWidth*($3[0].length+1);}ctx.restore();}
SharpShooter.NumberDrawer.$1=function($p0,$p1,$p2,$p3){$p0.save();$p0.translate($p1,$p2);for(var $0=0;$0<$p3.length;$0++){for(var $1=0;$1<$p3[$0].length;$1++){if($p3[$0][$1]){$p0.fillRect(SharpShooter.NumberDrawer.pixelWidth*$1,SharpShooter.NumberDrawer.pixelHeight*$0,SharpShooter.NumberDrawer.pixelWidth,SharpShooter.NumberDrawer.pixelHeight);}}}$p0.restore();}
SharpShooter.NumberDrawer.$2=function($p0){switch($p0){case 0:return SharpShooter.NumberDrawer.d0;case 1:return SharpShooter.NumberDrawer.d1;case 2:return SharpShooter.NumberDrawer.d2;case 3:return SharpShooter.NumberDrawer.d3;case 4:return SharpShooter.NumberDrawer.d4;case 5:return SharpShooter.NumberDrawer.d5;case 6:return SharpShooter.NumberDrawer.d6;case 7:return SharpShooter.NumberDrawer.d7;case 8:return SharpShooter.NumberDrawer.d8;case 9:return SharpShooter.NumberDrawer.d9;default:return SharpShooter.NumberDrawer.$0;}}
SharpShooter.NumberDrawer.$3=function($p0){var $0=[];if(!$p0){$0.insert(0,0);}else{while($p0>0){var $1=$p0%10;$0.insert(0,$1);$p0=Math.floor($p0/10);}}return $0;}
SharpShooter.Rectangle=function(x,y,width,height){this.x=x;this.y=y;this.width=width;this.height=height;}
SharpShooter.Rectangle.createFromDoubles=function(x,y,width,height){var $0=(1000*x);var $1=(1000*y);var $2=(1000*width);var $3=(1000*height);return new SharpShooter.Rectangle($0,$1,$2,$3);}
SharpShooter.Rectangle.intersect=function(value1,value2){var $0=value1.x+value1.width;var $1=value2.x+value2.width;var $2=value1.y+value1.height;var $3=value2.y+value2.height;var $4=(value1.x>value2.x)?value1.x:value2.x;var $5=(value1.y>value2.y)?value1.y:value2.y;var $6=($0<$1)?$0:$1;var $7=($2<$3)?$2:$3;var $8=new SharpShooter.Rectangle(0,0,0,0);if($6>$4&&$7>$5){$8.x=$4;$8.y=$5;$8.width=$6-$4;$8.height=$7-$5;}else{$8.x=0;$8.y=0;$8.width=0;$8.height=0;}return $8;}
SharpShooter.Rectangle.union=function(value1,value2){var $0=value1.x+value1.width;var $1=value2.x+value2.width;var $2=value1.y+value1.height;var $3=value2.y+value2.height;var $4=(value1.x<value2.x)?value1.x:value2.x;var $5=(value1.y<value2.y)?value1.y:value2.y;var $6=($0>$1)?$0:$1;var $7=($2>$3)?$2:$3;var $8=new SharpShooter.Rectangle(0,0,0,0);$8.x=$4;$8.y=$5;$8.width=$6-$4;$8.height=$7-$5;return $8;}
SharpShooter.Rectangle.prototype={x:0,y:0,width:0,height:0,offset:function(offsetX,offsetY){this.x+=offsetX;this.y+=offsetY;},inflate:function(horizontalAmount,verticalAmount){this.x-=horizontalAmount;this.y-=verticalAmount;this.width+=horizontalAmount*2;this.height+=verticalAmount*2;},contains:function(x,y){return this.x<=x&&x<this.x+this.width&&this.y<=y&&y<this.y+this.height;},containsPoint:function(value){return this.x<=value.x&&value.x<this.x+this.width&&this.y<=value.y&&value.y<this.y+this.height;},containsRectangle:function(value){return this.x<=value.x&&value.x+value.width<=this.x+this.width&&this.y<=value.y&&value.y+value.height<=this.y+this.height;},intersects:function(value){return value.x<this.x+this.width&&this.x<value.x+value.width&&value.y<this.y+this.height&&this.y<value.y+value.height;},equals:function(other){return this.x===other.x&&this.y===other.y&&this.width===other.width&&this.height===other.height;}}
SharpShooter.Theme=function(){}
SharpShooter.Theme.prototype={enemyStyle:null,backgroundStyle1:null,backgroundStyle2:null,backgroundStyle3:null,playerStyle:null,bulletStyle:null}
window.$0=function(){$1();for(var $0=0;$0<10;$0++){SharpShooter.Engine.instance.addObject(new SharpShooter.Enemy(150+$0*40,$0*50+60,SharpShooter.Theme.current.enemyStyle));}for(var $1=0;$1<10;$1++){SharpShooter.Engine.instance.addObject(new SharpShooter.Enemy(350+$1*40,$1*50+60,SharpShooter.Theme.current.enemyStyle));}SharpShooter.Player.current=new SharpShooter.Player(60,SharpShooter.Engine.screenHeight/2,SharpShooter.Theme.current.playerStyle);SharpShooter.Engine.instance.addObject(SharpShooter.Player.current);SharpShooter.Engine.instance.initializeLoop();}
window.$1=function(){for(var $0=0;$0<9;$0++){for(var $1=0;$1<5;$1++){var $2=new SharpShooter.MovingBackgroundTile($1*150,520-$0*100,200,200,SharpShooter.Theme.current.backgroundStyle2);$2.width=15;$2.height=15;SharpShooter.Engine.instance.addDecoration($2);}}for(var $3=0;$3<9;$3++){for(var $4=0;$4<5;$4++){SharpShooter.Engine.instance.addDecoration(new SharpShooter.MovingBackgroundTile($4*100,525-$3*100,350,350,SharpShooter.Theme.current.backgroundStyle3));}}}
SharpShooter.Engine=function(){this.$0=[];this.$1=[];}
SharpShooter.Engine.prototype={$2:null,$3:null,initializeLoop:function(){var $0=document.getElementById('canvas');this.$2=$0.getContext('2d');window.setInterval(ss.Delegate.create(this,this.$5),30);},$4:function($p0){this.$2.save();this.$2.font='72px MunroRegular';this.$2.fillStyle='Black';var $0=40;var $1=this.$2.measureText($p0).width;var $2=this.$2.measureText($p0);this.$2.fillRect(SharpShooter.Engine.screenWidth/2-($1+20)/2,SharpShooter.Engine.screenHeight/2-$0/2,($1+20),$0);this.$2.fillStyle='White';this.$2.fillText($p0,SharpShooter.Engine.screenWidth/2-$1/2,SharpShooter.Engine.screenHeight/2+14);this.$2.restore();},isStarted:false,start:function(){this.isStarted=true;this.$3=Date.get_now();},$5:function(){this.$2.fillStyle='#'+(777777-(this.$6()*111111));this.$2.fillRect(0,0,SharpShooter.Engine.screenWidth,SharpShooter.Engine.screenHeight);this.$0=this.$0.filter(function($p1_0){
return !$p1_0.isDead;});var $0=Date.get_now();var $1=(this.isStarted)?$0-this.$3:0;this.$3=$0;for(var $2=0;$2<this.$1.length;$2++){this.$1[$2].update($1);}for(var $3=0;$3<this.$0.length;$3++){this.$0[$3].update($1);}for(var $4=0;$4<this.$1.length;$4++){this.$1[$4].move($1);}for(var $5=0;$5<this.$0.length;$5++){this.$0[$5].move($1);}for(var $6=0;$6<this.$0.length;$6++){for(var $7=$6+1;$7<this.$0.length;$7++){this.$0[$6].collide(this.$0[$7]);this.$0[$7].collide(this.$0[$6]);}}for(var $8=0;$8<this.$1.length;$8++){this.$1[$8].draw(this.$2);}for(var $9=0;$9<this.$0.length;$9++){this.$0[$9].draw(this.$2);}SharpShooter.NumberDrawer.draw(this.$2,SharpShooter.Engine.screenWidth-30,30,SharpShooter.Enemy.killCount,1);if(!this.isStarted){this.$4('SHOOT TO START');}else if(SharpShooter.Player.current.isDead){this.$4('PRESS [ENTER] TO RETRY');}},$6:function(){var $0=SharpShooter.Enemy.killCount;if($0<10){return 0;}else if($0<20){return 1;}else if($0<40){return 2;}else if($0<80){return 3;}else if($0<160){return 4;}else if($0<320){return 5;}else{return 6;}},addObject:function(o){this.$0.add(o);},addDecoration:function(o){this.$1.add(o);}}
SharpShooter.Collideable=function(x,y,style){SharpShooter.Collideable.initializeBase(this,[x,y,style]);}
SharpShooter.Collideable.prototype={collide:function(other){if(other.getPosition().intersects(this.getPosition())){other.acceptVisitor(this.getVisitor());}},getVisitor:function(){return new SharpShooter.EmptyVisitor();}}
SharpShooter.EmptyVisitor=function(){}
SharpShooter.EmptyVisitor.prototype={visitBullet:function(b){},visitPlayer:function(p){},visitEnemy:function(e){}}
SharpShooter.Bullet=function(x,y,vx,vy,style,ttl){SharpShooter.Bullet.initializeBase(this,[x,y,style]);this.vx=vx;this.vy=vy;this.$0=ttl;this.width=16;this.height=16;}
SharpShooter.Bullet.prototype={$0:0,update:function(milliseconds){SharpShooter.Bullet.callBaseMethod(this, 'update',[milliseconds]);this.$0-=milliseconds;if(this.$0<=0){this.isDead=true;}},move:function(milliseconds){SharpShooter.MovementStrategies.free(this,milliseconds);},getVisitor:function(){return new SharpShooter.BulletVisitor(this);},acceptVisitor:function(v){v.visitBullet(this);}}
SharpShooter.BulletVisitor=function(parent){SharpShooter.BulletVisitor.initializeBase(this);this.$0=parent;}
SharpShooter.BulletVisitor.prototype={$0:null,visitEnemy:function(e){this.$0.isDead=true;}}
SharpShooter.Drawable=function(x,y,style){SharpShooter.Drawable.initializeBase(this);this.width=20;this.height=20;this.x=x;this.y=y;this.vx=0;this.vy=0;this.style=style;}
SharpShooter.Drawable.prototype={style:null,draw:function(ctx){ctx.save();ctx.fillStyle=this.style;ctx.fillRect(this.x,this.y,this.width,this.height);ctx.restore();}}
SharpShooter.Enemy=function(x,y,style){SharpShooter.Enemy.initializeBase(this,[x,y,style]);this.vx=-200;this.vy=Math.random()*200-100;}
SharpShooter.Enemy.prototype={acceptVisitor:function(v){v.visitEnemy(this);},getVisitor:function(){return new SharpShooter.EnemyVisitor(this);},$0:1,update:function(milliseconds){this.vy+=1*this.$0*(milliseconds/1000);if(this.vy<-100||this.vy>100){this.$0*=-1;}}}
SharpShooter.EnemyVisitor=function(parent){SharpShooter.EnemyVisitor.initializeBase(this);this.$0=parent;}
SharpShooter.EnemyVisitor.prototype={$0:null,visitBullet:function(b){this.$0.isDead=true;SharpShooter.Enemy.killCount++;var $0=new SharpShooter.Enemy(SharpShooter.Engine.screenWidth,Math.random()*SharpShooter.Engine.screenHeight,this.$0.style);$0.vx*=1.3;SharpShooter.Engine.instance.addObject($0);}}
SharpShooter.MovingBackgroundTile=function(x,y,vxAmount,vyAmount,style){SharpShooter.MovingBackgroundTile.initializeBase(this,[x,y,style]);this.vx=-vxAmount;}
SharpShooter.MovingBackgroundTile.prototype={$0:0,$1:0}
SharpShooter.Player=function(x,y,style){SharpShooter.Player.initializeBase(this,[x,y,style]);this.vx=0;this.vy=0;this.width=30;this.height=40;$(document).keydown(null,ss.Delegate.create(this,function($p1_0){
switch($p1_0.which){case 37:case 65:this.vx=-this.$0;break;case 39:case 68:this.vx=this.$0;break;case 38:case 87:this.vy=-this.$1;break;case 40:case 83:this.vy=this.$1;break;case 32:case 88:this.$2=true;break;}}));$(document).keyup(null,ss.Delegate.create(this,function($p1_0){
switch($p1_0.which){case 37:case 39:case 65:case 68:this.vx=0;break;case 38:case 40:case 87:case 83:this.vy=0;break;case 32:case 88:this.$2=false;break;}}));}
SharpShooter.Player.prototype={$0:250,$1:250,move:function(milliseconds){SharpShooter.MovementStrategies.framed(this,milliseconds);},draw:function(ctx){ctx.save();ctx.fillStyle=this.style;ctx.fillRect(this.x,this.y,this.width,this.height);ctx.fillRect(this.x,this.y-10,15,this.height+20);ctx.fillRect(this.x,this.y+10,this.width+15,this.height-20);ctx.restore();},update:function(milliseconds){if(this.coolDown>0){this.coolDown-=milliseconds;}else if(this.$2){this.shoot();}},coolDown:0,$2:false,shoot:function(){if(this.isDead){return;}if(this.coolDown>0){return;}var $0=this.$0*2;var $1=0;SharpShooter.Engine.instance.addObject(new SharpShooter.Bullet(this.x+this.width,this.y+this.height/2-8,$0,$1,SharpShooter.Theme.current.bulletStyle,2000));this.coolDown=250;},acceptVisitor:function(v){v.visitPlayer(this);},getVisitor:function(){return new SharpShooter.PlayerVisitor(this);}}
SharpShooter.PlayerVisitor=function(parent){SharpShooter.PlayerVisitor.initializeBase(this);this.$0=parent;}
SharpShooter.PlayerVisitor.prototype={$0:null,visitEnemy:function(e){this.$0.isDead=true;}}
SharpShooter.GameObject=function(){}
SharpShooter.GameObject.prototype={isDead:false,x:0,y:0,vx:0,vy:0,width:0,height:0,getPosition:function(){return SharpShooter.Rectangle.createFromDoubles(this.x,this.y,this.width,this.height);},update:function(milliseconds){},move:function(milliseconds){SharpShooter.MovementStrategies.continuous(this,milliseconds);}}
SharpShooter.Point=function(x,y){this.x=x;this.y=y;}
SharpShooter.Point.prototype={x:0,y:0}
SharpShooter.MovementStrategies.registerClass('SharpShooter.MovementStrategies');SharpShooter.NumberDrawer.registerClass('SharpShooter.NumberDrawer');SharpShooter.Rectangle.registerClass('SharpShooter.Rectangle');SharpShooter.Theme.registerClass('SharpShooter.Theme');SharpShooter.Engine.registerClass('SharpShooter.Engine');SharpShooter.GameObject.registerClass('SharpShooter.GameObject');SharpShooter.Drawable.registerClass('SharpShooter.Drawable',SharpShooter.GameObject);SharpShooter.Collideable.registerClass('SharpShooter.Collideable',SharpShooter.Drawable);SharpShooter.EmptyVisitor.registerClass('SharpShooter.EmptyVisitor',null,SharpShooter.ICollideableVisitor);SharpShooter.Bullet.registerClass('SharpShooter.Bullet',SharpShooter.Collideable);SharpShooter.BulletVisitor.registerClass('SharpShooter.BulletVisitor',SharpShooter.EmptyVisitor);SharpShooter.Enemy.registerClass('SharpShooter.Enemy',SharpShooter.Collideable);SharpShooter.EnemyVisitor.registerClass('SharpShooter.EnemyVisitor',SharpShooter.EmptyVisitor);SharpShooter.MovingBackgroundTile.registerClass('SharpShooter.MovingBackgroundTile',SharpShooter.Drawable);SharpShooter.Player.registerClass('SharpShooter.Player',SharpShooter.Collideable);SharpShooter.PlayerVisitor.registerClass('SharpShooter.PlayerVisitor',SharpShooter.EmptyVisitor);SharpShooter.Point.registerClass('SharpShooter.Point');SharpShooter.NumberDrawer.$0=[[false,false,false],[false,false,false],[false,false,false],[false,false,false],[false,false,false]];SharpShooter.NumberDrawer.d0=[[true,true,true],[true,false,true],[true,false,true],[true,false,true],[true,true,true]];SharpShooter.NumberDrawer.d1=[[false,false,true],[false,false,true],[false,false,true],[false,false,true],[false,false,true]];SharpShooter.NumberDrawer.d2=[[true,true,true],[false,false,true],[true,true,true],[true,false,false],[true,true,true]];SharpShooter.NumberDrawer.d3=[[true,true,true],[false,false,true],[true,true,true],[false,false,true],[true,true,true]];SharpShooter.NumberDrawer.d4=[[true,false,true],[true,false,true],[true,true,true],[false,false,true],[false,false,true]];SharpShooter.NumberDrawer.d5=[[true,true,true],[true,false,false],[true,true,true],[false,false,true],[true,true,true]];SharpShooter.NumberDrawer.d6=[[true,true,true],[true,false,false],[true,true,true],[true,false,true],[true,true,true]];SharpShooter.NumberDrawer.d7=[[true,true,true],[false,false,true],[false,false,true],[false,false,true],[false,false,true]];SharpShooter.NumberDrawer.d8=[[true,true,true],[true,false,true],[true,true,true],[true,false,true],[true,true,true]];SharpShooter.NumberDrawer.d9=[[true,true,true],[true,false,true],[true,true,true],[false,false,true],[true,true,true]];SharpShooter.NumberDrawer.pixelWidth=10;SharpShooter.NumberDrawer.pixelHeight=10;SharpShooter.Theme.classic=null;SharpShooter.Theme.current=null;(function(){SharpShooter.Theme.classic=new SharpShooter.Theme();SharpShooter.Theme.classic.enemyStyle='#DD0000';SharpShooter.Theme.classic.backgroundStyle1='#666666';SharpShooter.Theme.classic.backgroundStyle2='#505050';SharpShooter.Theme.classic.backgroundStyle3='#404040';SharpShooter.Theme.classic.playerStyle='white';SharpShooter.Theme.classic.bulletStyle='white';SharpShooter.Theme.current=SharpShooter.Theme.classic;})();
(function(){$(function(){
$0();});$(document).keydown(null,function($p1_0){
switch($p1_0.which){case 13:window.open(window.document.URL,'_self');break;case 32:case 88:if(!SharpShooter.Engine.instance.isStarted){SharpShooter.Engine.instance.start();}break;}});})();
SharpShooter.Engine.instance=new SharpShooter.Engine();SharpShooter.Engine.screenWidth=800;SharpShooter.Engine.screenHeight=600;SharpShooter.Enemy.killCount=0;SharpShooter.Player.current=null;})(jQuery);// This script was generated using Script# v0.7.4.0
